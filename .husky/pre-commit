#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” SÃ¤kerhetskontroll..."

# Kontrollera efter registreringsnummer
if git diff --cached --name-only | xargs grep -l "\b[A-Z]{3}[0-9]{3}\b" 2>/dev/null; then
  echo "âŒ VARNING: Registreringsnummer upptÃ¤ckt i commit!"
  echo "   AnvÃ¤nd testdata eller maskerade vÃ¤rden istÃ¤llet."
  exit 1
fi

# Kontrollera efter VIN
if git diff --cached --name-only | xargs grep -l "\b[A-HJ-NPR-Z0-9]{17}\b" 2>/dev/null; then
  echo "âŒ VARNING: VIN-nummer upptÃ¤ckt i commit!"
  echo "   AnvÃ¤nd testdata eller maskerade vÃ¤rden istÃ¤llet."
  exit 1
fi

# Kontrollera efter personnummer
if git diff --cached --name-only | xargs grep -l "\b[0-9]{6}-[0-9]{4}\b" 2>/dev/null; then
  echo "âŒ VARNING: Personnummer upptÃ¤ckt i commit!"
  exit 1
fi

# KÃ¶r linting
npm run lint-staged

echo "âœ… SÃ¤kerhetskontroll godkÃ¤nd"
